R=lambda:map(int,input().split())
t,=R()
for _ in[0]*t:
 n,m=R();a=1,*R()
 while a[n]==n:n-=1
 q=n>0
 for _ in[0]*m:r,p=input().split();q*=1-float(p)*(int(r)>=n)
 print(1-q)